{#
 # Page Body include template
 # -----------------------------
 #
 # This template is used to output HTML for an "Page Body" Matrix field.
 #
 # An `entry` variable is expected to be defined.
-#}

{% set blocks = entry.pageBody %}

{% for i, block in blocks %}

  {% set nextBlock = not loop.last ? blocks[i+1] : false %}
  {% set prevBlock = not loop.first ? blocks[i-1] : false %}

  {% if loop.first and not (block.colWidth | full_width) %}
    <div class="wrap wrap--contained">
      <div class="row">
  {% elseif loop.first and (block.colWidth | full_width) %}
    <div class="wrap">
      <div class="row">
  {% elseif not loop.first and (block.colWidth | full_width) and (prevBlock.colWidth | full_width) %}
    <!-- nothing -->
  {% elseif not loop.first and (prevBlock.colWidth | full_width) and not (block.colWidth | full_width) %}
      </div> <!-- close the row before -->
    </div> <!-- close the wrap before -->
    <div class="wrap wrap--contained">
      <div class="row">
  {% endif %}





  {% if (block.colWidth | new_row) and not loop.first %}
    </div> <!-- close row -->
    <div class="row"> <!-- re-open row -->
  {% endif %}




  <div class="{{block.colWidth|mobile_class("sm")}} {{block.colWidth|desktop_class("lg")}} {{block.colWidth|tablet_class("md")}} {{block.colWidth|wide_class("xl")}}">
    {% switch block.type %}
      {% case 'richContent' %}
        {{ block.richContent }}
      {% case 'hero' %}
        print hero here
    {% endswitch %}
  </div>




  {% if loop.last %}
      </div> <!-- close first opened row -->
    </div> <!-- close <main> -->
  {% endif %}

{% endfor %}
